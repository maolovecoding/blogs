import{_ as s,o as a,c as o,V as n}from"./chunks/framework.abf2da00.js";const i=JSON.parse('{"title":"Clipboard API","description":"","frontmatter":{},"headers":[],"relativePath":"web/js/02.读写剪切板内容.md","filePath":"web/js/02.读写剪切板内容.md","lastUpdated":1688093604000}'),l={name:"web/js/02.读写剪切板内容.md"},p=n(`<h1 id="clipboard-api" tabindex="-1">Clipboard API <a class="header-anchor" href="#clipboard-api" aria-label="Permalink to &quot;Clipboard API&quot;">​</a></h1><h2 id="剪贴板读取和写入" tabindex="-1">剪贴板读取和写入 <a class="header-anchor" href="#剪贴板读取和写入" aria-label="Permalink to &quot;剪贴板读取和写入&quot;">​</a></h2><p>Clipboard API 是一个 Web API，它可以让开发者通过 JavaScript 代码来读取或写入剪贴板中的内容。这个 API 包含两种操作：读取剪贴板内容和写入剪贴板内容。</p><h2 id="读取剪贴板内容" tabindex="-1">读取剪贴板内容 <a class="header-anchor" href="#读取剪贴板内容" aria-label="Permalink to &quot;读取剪贴板内容&quot;">​</a></h2><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">navigator</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">clipboard</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">readText</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;font-style:italic;">text</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">获取到的文本内容是：</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> text))</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">catch</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;font-style:italic;">err</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">error</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">读取剪贴板内容失败：</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> err))</span><span style="color:#89DDFF;">;</span></span></code></pre></div><p>值得注意的是，读取剪贴板内容的操作需要用户授权。在用户同意授权之前，调用 <code>navigator.clipboard.readText()</code> 方法会抛出 <code>SecurityError</code> 异常。因此，我们可以在用户点击按钮之类的事件触发读取剪贴板操作，以获取用户授权。</p><h2 id="写入剪贴板内容" tabindex="-1">写入剪贴板内容 <a class="header-anchor" href="#写入剪贴板内容" aria-label="Permalink to &quot;写入剪贴板内容&quot;">​</a></h2><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> text </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">这是要复制到剪贴板的文本内容</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">navigator</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">clipboard</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">writeText</span><span style="color:#A6ACCD;">(text)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">文本内容已成功写入剪贴板</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">catch</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;font-style:italic;">err</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">error</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">写入剪贴板失败：</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> err))</span><span style="color:#89DDFF;">;</span></span></code></pre></div><p>写入剪贴板内容的操作也需要用户授权。在用户同意授权之前，调用 navigator.clipboard.writeText(text) 方法会抛出 SecurityError 异常。同样地，我们可以在用户点击按钮之类的事件触发写入剪贴板操作，以获取用户授权。</p>`,9),e=[p];function t(r,c,A,D,y,C){return a(),o("div",null,e)}const d=s(l,[["render",t]]);export{i as __pageData,d as default};
